<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.jzteam.barber.dao.OrderDao">
    <!-- 数据对象映射。 -->
    <resultMap id="OrderMap" type="cn.jzteam.barber.dao.entity.OrderEntity">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="user_id" property="userId" jdbcType="INTEGER"/>
        <result column="employee_id" property="employeeId" jdbcType="INTEGER"/>
        <result column="product_id" property="productId" jdbcType="TINYINT"/>
        <result column="amount" property="amount" jdbcType="DOUBLE"/>
        <result column="status" property="status" jdbcType="TINYINT"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="delete_flag" property="deleteFlag" jdbcType="TINYINT"/>
    </resultMap>

    <!-- 表中所有字段。 -->
    <sql id="table_all_columns">
        `id`, `user_id`, `employee_id`, `product_id`, `amount`, `status`, `create_time`, `delete_flag`
    </sql>
    
    <!-- 判断要获取的列。 -->
    <sql id="sql_query_column">
        <choose>
            <when test="query.queryColumnStr != null">${query.queryColumnStr}</when>
            <otherwise><include refid="table_all_columns"/></otherwise>
        </choose>
    </sql>

    <!-- 共用sql部分，根据Query对象生成查询条件。FLOAT类型不支持相等查询 -->
    <sql id="sql_query_condition">
        <if test="query.id != null"> AND id = #{query.id, jdbcType=INTEGER} </if>
        <if test="query.userId != null"> AND user_id = #{query.userId, jdbcType=INTEGER} </if>
        <if test="query.employeeId != null"> AND employee_id = #{query.employeeId, jdbcType=INTEGER} </if>
        <if test="query.productId != null"> AND product_id = #{query.productId, jdbcType=TINYINT} </if>
        <if test="query.amount != null"> AND amount = #{query.amount, jdbcType=DOUBLE} </if>
        <if test="query.status != null"> AND status = #{query.status, jdbcType=TINYINT} </if>
        <if test="query.createTimeBegin != null"> AND create_time >= #{query.createTimeBegin, jdbcType=TIMESTAMP} </if>
        <if test="query.createTimeEnd != null"> AND create_time &lt; #{query.createTimeEnd, jdbcType=TIMESTAMP} </if>
        <if test="query.deleteFlag != null"> AND delete_flag = #{query.deleteFlag, jdbcType=TINYINT} </if>
    </sql>

    <!-- 判断排序依据。 -->
    <sql id="sql_order_by">
        <choose>
            <when test="query.orderStr != null"> ORDER BY ${query.orderStr} </when>
            <otherwise> ORDER BY id ASC </otherwise>
        </choose>
    </sql>

    
    

</mapper>

